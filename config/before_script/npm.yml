before_script:
  # Install NPM dependencies
  # Will use node 10 by default if $NVM_NODE is undefined, which is ideal
  # To use an old version of node for a module, define the following in .travis.yml
  # env:
  #   global:
  #     - TRAVIS_NODE_VERSION="6"
  - if [[ $NPM_TEST ]]; then rm -rf client/dist && nvm install $TRAVIS_NODE_VERSION && nvm use $TRAVIS_NODE_VERSION && npm install -g yarn && yarn install --network-concurrency 1 && (cd vendor/silverstripe/admin && yarn install --network-concurrency 1) && yarn run build; fi
